{{ define "main" }}
  {{ if .Params.date_scope }}
    <div class="h-feed hfeed mb-20">
      {{ if eq .Params.date_scope "day" }}
        {{ $archiveDate := time.AsTime (printf "%v-%v-%v" .Params.archive_year .Params.archive_month .Params.archive_day) }}
        {{ if eq .Section "archive" }}
          <h1 class="p-name mb-8 text-3xl text-light">
            <a href="/archive">Archive</a>
            {{ partial "date_with_ordinal_day.html" $archiveDate }}
          </h1>
        {{ else }}
          <h1 class="p-name mb-8 text-3xl text-light">{{ partial "date_with_ordinal_day.html" $archiveDate }}</h1>
        {{ end }}
      {{ else if eq .Params.date_scope "month" }}
        {{ $archiveMonth := time.AsTime (printf "%v-%v-01" .Params.archive_year .Params.archive_month) }}
        {{ if eq .Section "archive" }}
          <h1 class="p-name mb-8 text-3xl text-light">
            <a href="/archive">Archive</a>
            {{ $archiveMonth.Format "January 2006" }}
          </h1>
        {{ else }}
          <h1 class="p-name mb-8 text-3xl text-light">{{ $archiveMonth.Format "January 2006" }}</h1>
        {{ end }}
      {{ else }}
        <h1 class="p-name mb-8 text-3xl text-light">{{ .Title }}</h1>
      {{ end }}
      {{ with .Content }}
        <div class="p-summary mb-8">{{ . }}</div>
      {{ end }}
      {{ partial "date-archive-content.html" . }}
    </div>
  {{ else }}
    <div class="h-feed hfeed mb-20">
      <h1 class="p-name mb-8 text-3xl text-light">{{ .Title }}</h1>
      {{ with .Content }}
        <div class="p-summary mb-8">{{ . }}</div>
      {{ end }}
      {{ $pages := .Data.Pages -}}
      {{- $paginator := .Paginate $pages -}}
      {{ partial "grouped-list-by-day.html" (dict "Pages" $paginator.Pages "ItemLayout" "li-grouped") }}
      {{- partial "pagination.html" (dict "page" . "format" "terse" ) }}
    </div>
  {{ end }}
{{- end -}}
