{{ define "main" }}
  <div class="mb-20">
    <article class="h-entry {{ .Section }}">
      <header class="mb-8">
        {{- $rawParts := split .RelPermalink "/" -}}
        {{- $parts := slice -}}
        {{- range $rawParts -}}
          {{- if ne . "" -}}
            {{- $parts = $parts | append . -}}
          {{- end -}}
        {{- end }}
        {{ if .Title }}
          <h1 class="p-name mb-4 text-3xl text-orange {{ if .Params.hide_title }}hidden{{ end }}">
            {{ .Title }}
          </h1>
        {{ end }}
        {{ if .Date }}
          <div class="mb-4">
            <time
              class="dt-published"
              datetime="{{ .Date }}"
              itemprop="dateCreated pubdate datePublished"
              style="border: none; color: rgba(156, 163, 175, 1);"
            >
              {{ partial "date_with_ordinal_day.html" .Date }}
            </time>
          </div>
        {{ end }}

        {{ if .ContentWithoutSummary }}
          <div class="p-summary mb-2 prose prose-invert text-light font-sans">{{ .Summary }}</div>
        {{ else }}
          <div
            class="e-content prose prose-invert text-light font-sans prose-a:no-underline prose-a:border-b-2 prose-a:border-orange prose-a:hover:border-red mb-16"
          >
            {{ .Content }}
          </div>
        {{ end }}
      </header>
      {{ if .ContentWithoutSummary }}
        <div
          class="e-content prose prose-invert text-light font-sans prose-a:no-underline prose-a:border-b-2 prose-a:border-orange prose-a:hover:border-red mb-16"
        >
          {{ .ContentWithoutSummary }}
        </div>
      {{ end }}
      <footer>
        <div class="mb-4 text-sm">
          {{ if .Date -}}
            <p class="mb-2 flex justify-end">
              <a
                href="{{ .RelPermalink }}"
                style="border-bottom-width: 1px; border-bottom-color: transparent"
              >
                <time
                  class="dt-published"
                  datetime="{{ . }}"
                  itemprop="dateCreated pubdate datePublished"
                  style="border: none; color: rgba(156, 163, 175, 1);"
                >
                  {{ .Date.Format "3:04pm" }}
                </time>
              </a>
            </p>
          {{- end }}
          {{- with .GetTerms "tags" }}
            <ul class="mb-2 flex justify-end" style="gap: 1.5em;">
              {{- range . }}
                <li class="p-category">
                  <a
                    href="{{ .RelPermalink }}"
                    rel="category tag"
                    class="prepended-icon hashtag"
                    style="border: none; color: inherit;"
                    >{{ .Title }}</a
                  >
                </li>
              {{- end }}
            </ul>
          {{- end }}
        </div>

        <div class="hidden">
          <p>
            written by
            <a href="/" class="h-card p-author">
              <span class="p-name">Paul Tibbetts</span>
              <img class="u-photo" src="/icon.png" alt="Paul Tibbetts" />
            </a>
          </p>
          <p>
            canonical url:
            <a class="u-url" href="{{ .Permalink }}">{{ .Permalink }}</a>
          </p>
        </div>
      </footer>
    </article>
  </div>
{{ end }}
